{
  "lockfile-version": 1,
  "manifest": {
    "version": 1,
    "install": {
      "gum": {
        "pkg-path": "gum"
      },
      "postgresql": {
        "pkg-path": "postgresql_16"
      }
    },
    "vars": {
      "PGDATABASE": "pgdb",
      "PGHOSTADDR": "127.0.0.1",
      "PGPASS": "pgpass",
      "PGPORT": "15432",
      "PGUSER": "pguser"
    },
    "hook": {
      "on-activate": "\nexport PGDIR=\"$FLOX_ENV_CACHE/postgres\"\nexport PGDATA=$PGDIR/data\nexport PGHOST=$PGDIR/run\nexport PGCONFIGFILE=\"$PGDIR/postgresql.conf\"\nexport LOG_PATH=$PGHOST/LOG\nexport SESSION_SECRET=\"$USER-session-secret\"\nexport DATABASE_URL=\"postgresql:///$PGDATABASE?host=$PGHOST&port=$PGPORT\"\n\nif [[ ! -d \"$PGHOST\" ]]; then\n  mkdir -p \"$PGHOST\"\nfi\n\nif [[ ! -d \"$PGDATA\" ]]; then\n  mkdir -p \"$PGDATA\"\n  pg_initdb() {\n    initdb \"$PGDATA\" \\\n      --locale=C \\\n      --encoding=UTF8 \\\n      -A md5 \\\n      --auth=trust \\\n      --username $PGUSER \\\n      --pwfile=<(echo $PGPASS)\n  }\n  export -f pg_initdb  # This is needed for gum to be able to call function\n  if [[ \"$FLOX_ENVS_TESTING\" == \"1\" ]]; then\n    pg_initdb\n  else\n    gum spin --spinner dot --title \"Running initdb in $PGDATA\" -- bash -c pg_initdb\n  fi\n  echo \"âœ… Initialize PostgreSQL ($PGDATA)\"\n\nfi\n\n\n#\nif [[ ! -f \"$PGCONFIGFILE\" ]]; then\n  tee -a $PGCONFIGFILE > /dev/null << EOF\nlisten_addresses = '$PGHOSTADDR';\nport = '$PGPORT';\nunix_socket_directories = '$PGHOST';\nunix_socket_permissions = '0700';\nEOF\n  echo \"âœ… Configure PostgreSQL ($PGCONFIGFILE)\"\nfi\n\npg_ctl -D \"$PGDATA\" -w start -o \"-c unix_socket_directories=$PGHOST -c listen_addresses=$PGHOSTADDR -p $PGPORT\" > /dev/null\nif psql -lqt | cut -d \\| -f 1 | grep -qw $PGDATABASE; then\n  echo \"âœ… Database '$PGDATABASE' already exists\"\nelse\n  createdb\n  echo \"âœ… Database '$PGDATABASE' created\"\nfi\npg_ctl -D \"$PGDATA\" -m fast -w stop > /dev/null\n\ngum style --border double --margin \"1 2\" --padding \"1 4\" \\\n  'Start PostgreSQL in the background:' \\\n  '  ðŸ‘‰ flox services start' \\\n  '  ðŸ‘‰ flox activate --start-services' '' \\\n  'Try to connect to PostgreSQL:' \\\n  '  ðŸ‘‰ psql' '' \\\n  'Connection information:' \\\n  \"  listen_addresses=$PGHOSTADDR\" \\\n  \"  port=$PGPORT\"\n\n"
    },
    "options": {
      "systems": [
        "aarch64-darwin",
        "aarch64-linux",
        "x86_64-darwin",
        "x86_64-linux"
      ]
    },
    "services": {
      "postgres": {
        "command": "postgres -D $PGDATA -c unix_socket_directories=$PGHOST -c listen_addresses=$PGHOSTADDR -p $PGPORT"
      }
    }
  },
  "packages": [
    {
      "attr_path": "gum",
      "broken": false,
      "derivation": "/nix/store/kax95am43maaall0rvl78j7cy6zyh2z1-gum-0.16.0.drv",
      "description": "Tasty Bubble Gum for your shell",
      "install_id": "gum",
      "license": "MIT",
      "locked_url": "https://github.com/flox/nixpkgs?rev=adaa24fbf46737f3f1b5497bf64bae750f82942e",
      "name": "gum-0.16.0",
      "pname": "gum",
      "rev": "adaa24fbf46737f3f1b5497bf64bae750f82942e",
      "rev_count": 799423,
      "rev_date": "2025-05-13T23:30:50Z",
      "scrape_date": "2025-05-16T04:21:34.218888Z",
      "stabilities": [
        "staging",
        "unstable"
      ],
      "unfree": false,
      "version": "0.16.0",
      "outputs_to_install": [
        "out"
      ],
      "outputs": {
        "out": "/nix/store/85xh445j9a8sfw3n7852bzx3jpi1i67j-gum-0.16.0"
      },
      "system": "aarch64-darwin",
      "group": "toplevel",
      "priority": 5
    },
    {
      "attr_path": "gum",
      "broken": false,
      "derivation": "/nix/store/9yhhpcc0w153aw25vs6xh9jy4808hk6b-gum-0.16.0.drv",
      "description": "Tasty Bubble Gum for your shell",
      "install_id": "gum",
      "license": "MIT",
      "locked_url": "https://github.com/flox/nixpkgs?rev=adaa24fbf46737f3f1b5497bf64bae750f82942e",
      "name": "gum-0.16.0",
      "pname": "gum",
      "rev": "adaa24fbf46737f3f1b5497bf64bae750f82942e",
      "rev_count": 799423,
      "rev_date": "2025-05-13T23:30:50Z",
      "scrape_date": "2025-05-16T04:40:15.650664Z",
      "stabilities": [
        "staging",
        "unstable"
      ],
      "unfree": false,
      "version": "0.16.0",
      "outputs_to_install": [
        "out"
      ],
      "outputs": {
        "out": "/nix/store/7p2733wiqszssqzbrf70rwyjdpjgwfyi-gum-0.16.0"
      },
      "system": "aarch64-linux",
      "group": "toplevel",
      "priority": 5
    },
    {
      "attr_path": "gum",
      "broken": false,
      "derivation": "/nix/store/hy7wlx72ka092kkq4d0rcrlp9yg325hp-gum-0.16.0.drv",
      "description": "Tasty Bubble Gum for your shell",
      "install_id": "gum",
      "license": "MIT",
      "locked_url": "https://github.com/flox/nixpkgs?rev=adaa24fbf46737f3f1b5497bf64bae750f82942e",
      "name": "gum-0.16.0",
      "pname": "gum",
      "rev": "adaa24fbf46737f3f1b5497bf64bae750f82942e",
      "rev_count": 799423,
      "rev_date": "2025-05-13T23:30:50Z",
      "scrape_date": "2025-05-16T04:56:45.257317Z",
      "stabilities": [
        "staging",
        "unstable"
      ],
      "unfree": false,
      "version": "0.16.0",
      "outputs_to_install": [
        "out"
      ],
      "outputs": {
        "out": "/nix/store/pk0l7yn5r4phlpfdhk3j9adxhnc73cbg-gum-0.16.0"
      },
      "system": "x86_64-darwin",
      "group": "toplevel",
      "priority": 5
    },
    {
      "attr_path": "gum",
      "broken": false,
      "derivation": "/nix/store/j5cfbrdsrn74bwrv6k8bfk0xpg2k87kf-gum-0.16.0.drv",
      "description": "Tasty Bubble Gum for your shell",
      "install_id": "gum",
      "license": "MIT",
      "locked_url": "https://github.com/flox/nixpkgs?rev=adaa24fbf46737f3f1b5497bf64bae750f82942e",
      "name": "gum-0.16.0",
      "pname": "gum",
      "rev": "adaa24fbf46737f3f1b5497bf64bae750f82942e",
      "rev_count": 799423,
      "rev_date": "2025-05-13T23:30:50Z",
      "scrape_date": "2025-05-16T05:18:40.488040Z",
      "stabilities": [
        "staging",
        "unstable"
      ],
      "unfree": false,
      "version": "0.16.0",
      "outputs_to_install": [
        "out"
      ],
      "outputs": {
        "out": "/nix/store/ihpsbiw0s8lz6z50b29i8zwjk18w25zs-gum-0.16.0"
      },
      "system": "x86_64-linux",
      "group": "toplevel",
      "priority": 5
    },
    {
      "attr_path": "postgresql_16",
      "broken": false,
      "derivation": "/nix/store/ncgl1xrfwhv3n276l7lv4lmjx0qlvk2n-postgresql-16.9.drv",
      "description": "Powerful, open source object-relational database system",
      "install_id": "postgresql",
      "license": "PostgreSQL",
      "locked_url": "https://github.com/flox/nixpkgs?rev=adaa24fbf46737f3f1b5497bf64bae750f82942e",
      "name": "postgresql-16.9",
      "pname": "postgresql_16",
      "rev": "adaa24fbf46737f3f1b5497bf64bae750f82942e",
      "rev_count": 799423,
      "rev_date": "2025-05-13T23:30:50Z",
      "scrape_date": "2025-05-16T04:21:42.216865Z",
      "stabilities": [
        "staging",
        "unstable"
      ],
      "unfree": false,
      "version": "16.9",
      "outputs_to_install": [
        "man",
        "out"
      ],
      "outputs": {
        "dev": "/nix/store/j5xpq7pwandnza7s00z9v1s21gkdd6hy-postgresql-16.9-dev",
        "doc": "/nix/store/i0ca0hnmc5088zznrxksaiydk8nnmxnk-postgresql-16.9-doc",
        "jit": "/nix/store/lv2wdbb5kydv4l0qvik148pan70q3cq7-postgresql-16.9-jit",
        "lib": "/nix/store/l9pmr3am80ln3b9zgz9r6c2d2akjv6w1-postgresql-16.9-lib",
        "man": "/nix/store/3428f8b871hax467p1lcb980qxj08dmy-postgresql-16.9-man",
        "out": "/nix/store/062kswj6dl2v6f84l5466cj82imvl0h4-postgresql-16.9",
        "plperl": "/nix/store/nvjmw39bsrijlcnls010gmngxp9f2s2b-postgresql-16.9-plperl",
        "plpython3": "/nix/store/2g54salxryys83np2d7cvadswpc7k3vb-postgresql-16.9-plpython3",
        "pltcl": "/nix/store/gnqx4qmb35vhqxzc1g5bkxzpgf53irwn-postgresql-16.9-pltcl"
      },
      "system": "aarch64-darwin",
      "group": "toplevel",
      "priority": 5
    },
    {
      "attr_path": "postgresql_16",
      "broken": false,
      "derivation": "/nix/store/wr0lja0300amvfaslrdi6nxrk6jqwaj3-postgresql-16.9.drv",
      "description": "Powerful, open source object-relational database system",
      "install_id": "postgresql",
      "license": "PostgreSQL",
      "locked_url": "https://github.com/flox/nixpkgs?rev=adaa24fbf46737f3f1b5497bf64bae750f82942e",
      "name": "postgresql-16.9",
      "pname": "postgresql_16",
      "rev": "adaa24fbf46737f3f1b5497bf64bae750f82942e",
      "rev_count": 799423,
      "rev_date": "2025-05-13T23:30:50Z",
      "scrape_date": "2025-05-16T04:40:34.668846Z",
      "stabilities": [
        "staging",
        "unstable"
      ],
      "unfree": false,
      "version": "16.9",
      "outputs_to_install": [
        "man",
        "out"
      ],
      "outputs": {
        "debug": "/nix/store/yv4s2swp68w9q3w8skpbn4rl73h9mb40-postgresql-16.9-debug",
        "dev": "/nix/store/sffw9l0ghfb9aiw0myx5061r40v6mr20-postgresql-16.9-dev",
        "doc": "/nix/store/40ar5fbg0ydbksmfgm632q2ys0qv003c-postgresql-16.9-doc",
        "jit": "/nix/store/a7kb3gyr2vl61s8ih211ms32qxd80wp8-postgresql-16.9-jit",
        "lib": "/nix/store/mib4q9qya6nvca482jprcxj076jpcl18-postgresql-16.9-lib",
        "man": "/nix/store/mdfjnkqfdjx1fpsbpb0k3iq7f0hsnyqp-postgresql-16.9-man",
        "out": "/nix/store/307k7kppccg9zwf72ydrxifmy0k301j9-postgresql-16.9",
        "plperl": "/nix/store/sybi8nr2s092cq2n1fasxsj9wvb38snv-postgresql-16.9-plperl",
        "plpython3": "/nix/store/73pmr1jscscwfxdyl7hmxwi3hwcal7kp-postgresql-16.9-plpython3",
        "pltcl": "/nix/store/57qrf9xdkp3qnszibarfi89sc76gv6hr-postgresql-16.9-pltcl"
      },
      "system": "aarch64-linux",
      "group": "toplevel",
      "priority": 5
    },
    {
      "attr_path": "postgresql_16",
      "broken": false,
      "derivation": "/nix/store/zi9x0qdq1n1rkfp779yc99vvm2589m7n-postgresql-16.9.drv",
      "description": "Powerful, open source object-relational database system",
      "install_id": "postgresql",
      "license": "PostgreSQL",
      "locked_url": "https://github.com/flox/nixpkgs?rev=adaa24fbf46737f3f1b5497bf64bae750f82942e",
      "name": "postgresql-16.9",
      "pname": "postgresql_16",
      "rev": "adaa24fbf46737f3f1b5497bf64bae750f82942e",
      "rev_count": 799423,
      "rev_date": "2025-05-13T23:30:50Z",
      "scrape_date": "2025-05-16T04:56:53.042061Z",
      "stabilities": [
        "staging",
        "unstable"
      ],
      "unfree": false,
      "version": "16.9",
      "outputs_to_install": [
        "man",
        "out"
      ],
      "outputs": {
        "dev": "/nix/store/03myspr370fk1iyrn78y1qn949fmv7z1-postgresql-16.9-dev",
        "doc": "/nix/store/3s19ii2gxdqn82jf84mk45rjxkd60h0g-postgresql-16.9-doc",
        "jit": "/nix/store/pyjc08cq031dc504smh56jw3br5zzwbw-postgresql-16.9-jit",
        "lib": "/nix/store/8kvxpzmq101rmhq7y99pfm16zn7r6dz6-postgresql-16.9-lib",
        "man": "/nix/store/8arcksrw80yhda3l2pa74i0clcjqd67j-postgresql-16.9-man",
        "out": "/nix/store/mj4q0ff93zfniqalxmjpv5fa9bxj2jwx-postgresql-16.9",
        "plperl": "/nix/store/v4g68m9l2s9k23j8rnsqwrdbq0wxwn8d-postgresql-16.9-plperl",
        "plpython3": "/nix/store/bpk0angbprvkk7bdchzdf96gp6rs876y-postgresql-16.9-plpython3",
        "pltcl": "/nix/store/g1n3snii6hrvfhkvf58vj7wzq0g8pyrq-postgresql-16.9-pltcl"
      },
      "system": "x86_64-darwin",
      "group": "toplevel",
      "priority": 5
    },
    {
      "attr_path": "postgresql_16",
      "broken": false,
      "derivation": "/nix/store/pjg0fcys486zfxpcqnbi5l1rwb5wxi1c-postgresql-16.9.drv",
      "description": "Powerful, open source object-relational database system",
      "install_id": "postgresql",
      "license": "PostgreSQL",
      "locked_url": "https://github.com/flox/nixpkgs?rev=adaa24fbf46737f3f1b5497bf64bae750f82942e",
      "name": "postgresql-16.9",
      "pname": "postgresql_16",
      "rev": "adaa24fbf46737f3f1b5497bf64bae750f82942e",
      "rev_count": 799423,
      "rev_date": "2025-05-13T23:30:50Z",
      "scrape_date": "2025-05-16T05:19:02.130125Z",
      "stabilities": [
        "staging",
        "unstable"
      ],
      "unfree": false,
      "version": "16.9",
      "outputs_to_install": [
        "man",
        "out"
      ],
      "outputs": {
        "debug": "/nix/store/4nkn42ch8amj78769yw1n5n5s7m8q21w-postgresql-16.9-debug",
        "dev": "/nix/store/40brlrnc7dxs38dg85h85mqaa51bsp78-postgresql-16.9-dev",
        "doc": "/nix/store/8snnl11dvc5apvg1lvs7kiffhhm1hh2k-postgresql-16.9-doc",
        "jit": "/nix/store/hxnsml2pijjkaalzix08n9b5q1yb2fwx-postgresql-16.9-jit",
        "lib": "/nix/store/8pmj4q7zdprvmzid4jfvyi2mvymjv1f6-postgresql-16.9-lib",
        "man": "/nix/store/0vhgf5y9f4yzkrsm2ix35gjzc2jdln6k-postgresql-16.9-man",
        "out": "/nix/store/4vbqqnjvhi48hf9mmdc646a7x9kmx21w-postgresql-16.9",
        "plperl": "/nix/store/s8swlz02yc333jf8rka5lmv83bgl10fx-postgresql-16.9-plperl",
        "plpython3": "/nix/store/dmdvs5r18dr1dv7dkw943wwmll04yf0y-postgresql-16.9-plpython3",
        "pltcl": "/nix/store/17kqj75x8879l7gscarbxz329nlsqhgz-postgresql-16.9-pltcl"
      },
      "system": "x86_64-linux",
      "group": "toplevel",
      "priority": 5
    }
  ]
}
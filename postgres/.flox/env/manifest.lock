{
  "lockfile-version": 1,
  "manifest": {
    "version": 1,
    "install": {
      "gum": {
        "pkg-path": "gum"
      },
      "postgresql": {
        "pkg-path": "postgresql_16"
      }
    },
    "vars": {
      "PGDATABASE": "pgdb",
      "PGHOSTADDR": "127.0.0.1",
      "PGPASS": "pgpass",
      "PGPORT": "15432",
      "PGUSER": "pguser"
    },
    "hook": {
      "on-activate": "\nexport PGDIR=\"$FLOX_ENV_CACHE/postgres\"\nexport PGDATA=$PGDIR/data\nexport PGHOST=$PGDIR/run\nexport PGCONFIGFILE=\"$PGDIR/postgresql.conf\"\nexport LOG_PATH=$PGHOST/LOG\nexport SESSION_SECRET=\"$USER-session-secret\"\nexport DATABASE_URL=\"postgresql:///$PGDATABASE?host=$PGHOST&port=$PGPORT\"\n\nif [[ ! -d \"$PGHOST\" ]]; then\n  mkdir -p \"$PGHOST\"\nfi\n\nif [[ ! -d \"$PGDATA\" ]]; then\n  mkdir -p \"$PGDATA\"\n  pg_initdb() {\n    initdb \"$PGDATA\" \\\n      --locale=C \\\n      --encoding=UTF8 \\\n      -A md5 \\\n      --auth=trust \\\n      --username $PGUSER \\\n      --pwfile=<(echo $PGPASS)\n  }\n  export -f pg_initdb  # This is needed for gum to be able to call function\n  if [[ \"$FLOX_ENVS_TESTING\" == \"1\" ]]; then\n    pg_initdb\n  else\n    gum spin --spinner dot --title \"Running initdb in $PGDATA\" -- bash -c pg_initdb\n  fi\n  echo \"âœ… Initialize PostgreSQL ($PGDATA)\"\n\nfi\n\n\n#\nif [[ ! -f \"$PGCONFIGFILE\" ]]; then\n  tee -a $PGCONFIGFILE > /dev/null << EOF\nlisten_addresses = '$PGHOSTADDR';\nport = '$PGPORT';\nunix_socket_directories = '$PGHOST';\nunix_socket_permissions = '0700';\nEOF\n  echo \"âœ… Configure PostgreSQL ($PGCONFIGFILE)\"\nfi\n\npg_ctl -D \"$PGDATA\" -w start -o \"-c unix_socket_directories=$PGHOST -c listen_addresses=$PGHOSTADDR -p $PGPORT\" > /dev/null\nif psql -lqt | cut -d \\| -f 1 | grep -qw $PGDATABASE; then\n  echo \"âœ… Database '$PGDATABASE' already exists\"\nelse\n  createdb\n  echo \"âœ… Database '$PGDATABASE' created\"\nfi\npg_ctl -D \"$PGDATA\" -m fast -w stop > /dev/null\n\ngum style --border double --margin \"1 2\" --padding \"1 4\" \\\n  'Start PostgreSQL in the background:' \\\n  '  ðŸ‘‰ flox services start' \\\n  '  ðŸ‘‰ flox activate --start-services' '' \\\n  'Try to connect to PostgreSQL:' \\\n  '  ðŸ‘‰ psql' '' \\\n  'Connection information:' \\\n  \"  listen_addresses=$PGHOSTADDR\" \\\n  \"  port=$PGPORT\"\n\n"
    },
    "options": {
      "systems": [
        "aarch64-darwin",
        "aarch64-linux",
        "x86_64-darwin",
        "x86_64-linux"
      ]
    },
    "services": {
      "postgres": {
        "command": "postgres -D $PGDATA -c unix_socket_directories=$PGHOST -c listen_addresses=$PGHOSTADDR -p $PGPORT"
      }
    }
  },
  "packages": [
    {
      "attr_path": "gum",
      "broken": false,
      "derivation": "/nix/store/ij8bqwpmr4fh6p161d56yp4s1k62zyyd-gum-0.16.2.drv",
      "description": "Tasty Bubble Gum for your shell",
      "install_id": "gum",
      "license": "MIT",
      "locked_url": "https://github.com/flox/nixpkgs?rev=7fd36ee82c0275fb545775cc5e4d30542899511d",
      "name": "gum-0.16.2",
      "pname": "gum",
      "rev": "7fd36ee82c0275fb545775cc5e4d30542899511d",
      "rev_count": 834672,
      "rev_date": "2025-07-25T07:48:04Z",
      "scrape_date": "2025-07-27T00:28:21.835560Z",
      "stabilities": [
        "unstable"
      ],
      "unfree": false,
      "version": "0.16.2",
      "outputs_to_install": [
        "out"
      ],
      "outputs": {
        "out": "/nix/store/klzb6vbharlnnv135lav7w0vcvi655b5-gum-0.16.2"
      },
      "system": "aarch64-darwin",
      "group": "toplevel",
      "priority": 5
    },
    {
      "attr_path": "gum",
      "broken": false,
      "derivation": "/nix/store/ljldjklkmrhqfvqrn6f8v9n95lf0rqkg-gum-0.16.2.drv",
      "description": "Tasty Bubble Gum for your shell",
      "install_id": "gum",
      "license": "MIT",
      "locked_url": "https://github.com/flox/nixpkgs?rev=7fd36ee82c0275fb545775cc5e4d30542899511d",
      "name": "gum-0.16.2",
      "pname": "gum",
      "rev": "7fd36ee82c0275fb545775cc5e4d30542899511d",
      "rev_count": 834672,
      "rev_date": "2025-07-25T07:48:04Z",
      "scrape_date": "2025-07-27T00:48:12.364836Z",
      "stabilities": [
        "unstable"
      ],
      "unfree": false,
      "version": "0.16.2",
      "outputs_to_install": [
        "out"
      ],
      "outputs": {
        "out": "/nix/store/gyvfv5vkadk9l0p1l85wqb2d6rpa1857-gum-0.16.2"
      },
      "system": "aarch64-linux",
      "group": "toplevel",
      "priority": 5
    },
    {
      "attr_path": "gum",
      "broken": false,
      "derivation": "/nix/store/jgvanlic5qv5rl5lxqlgxcq23annfnwd-gum-0.16.2.drv",
      "description": "Tasty Bubble Gum for your shell",
      "install_id": "gum",
      "license": "MIT",
      "locked_url": "https://github.com/flox/nixpkgs?rev=7fd36ee82c0275fb545775cc5e4d30542899511d",
      "name": "gum-0.16.2",
      "pname": "gum",
      "rev": "7fd36ee82c0275fb545775cc5e4d30542899511d",
      "rev_count": 834672,
      "rev_date": "2025-07-25T07:48:04Z",
      "scrape_date": "2025-07-27T01:06:55.161621Z",
      "stabilities": [
        "unstable"
      ],
      "unfree": false,
      "version": "0.16.2",
      "outputs_to_install": [
        "out"
      ],
      "outputs": {
        "out": "/nix/store/rdfkiqni59b5pvfd6hb0kpar1gf0hb1p-gum-0.16.2"
      },
      "system": "x86_64-darwin",
      "group": "toplevel",
      "priority": 5
    },
    {
      "attr_path": "gum",
      "broken": false,
      "derivation": "/nix/store/rrc5m049n4cqf3hfyhabds9yin734hjh-gum-0.16.2.drv",
      "description": "Tasty Bubble Gum for your shell",
      "install_id": "gum",
      "license": "MIT",
      "locked_url": "https://github.com/flox/nixpkgs?rev=7fd36ee82c0275fb545775cc5e4d30542899511d",
      "name": "gum-0.16.2",
      "pname": "gum",
      "rev": "7fd36ee82c0275fb545775cc5e4d30542899511d",
      "rev_count": 834672,
      "rev_date": "2025-07-25T07:48:04Z",
      "scrape_date": "2025-07-27T01:28:54.583009Z",
      "stabilities": [
        "unstable"
      ],
      "unfree": false,
      "version": "0.16.2",
      "outputs_to_install": [
        "out"
      ],
      "outputs": {
        "out": "/nix/store/dagbgvfb0pcl5s8101g7cdy7rp7wn5rc-gum-0.16.2"
      },
      "system": "x86_64-linux",
      "group": "toplevel",
      "priority": 5
    },
    {
      "attr_path": "postgresql_16",
      "broken": false,
      "derivation": "/nix/store/njcvxhqp1xn5lpixxlgk25jzlhxwc7rr-postgresql-16.9.drv",
      "description": "Powerful, open source object-relational database system",
      "install_id": "postgresql",
      "license": "PostgreSQL",
      "locked_url": "https://github.com/flox/nixpkgs?rev=7fd36ee82c0275fb545775cc5e4d30542899511d",
      "name": "postgresql-16.9",
      "pname": "postgresql_16",
      "rev": "7fd36ee82c0275fb545775cc5e4d30542899511d",
      "rev_count": 834672,
      "rev_date": "2025-07-25T07:48:04Z",
      "scrape_date": "2025-07-27T00:28:30.081199Z",
      "stabilities": [
        "unstable"
      ],
      "unfree": false,
      "version": "16.9",
      "outputs_to_install": [
        "man",
        "out"
      ],
      "outputs": {
        "dev": "/nix/store/ralb4swkc8plp3r45sbdqcj0qqxgz703-postgresql-16.9-dev",
        "doc": "/nix/store/gxi514bxxqgf825nfnni3ms15k84nnn5-postgresql-16.9-doc",
        "jit": "/nix/store/xk6n9gp7kp54m10f2ki11b00f9g2rb6x-postgresql-16.9-jit",
        "lib": "/nix/store/209v7jbh6kvd5cc2fxnhzlxyll0s9zp3-postgresql-16.9-lib",
        "man": "/nix/store/k53mywhp49l2iz2nrrnwacv3mh12cvlv-postgresql-16.9-man",
        "out": "/nix/store/4m0fmy9b0fvzlr33cdv5rl829apvz8ic-postgresql-16.9",
        "plperl": "/nix/store/w1wmsqhxwck1cp1xfdpg81qv6akbhfv0-postgresql-16.9-plperl",
        "plpython3": "/nix/store/j9linfhnlvyb9ldyvm4whg4dg7yhziqy-postgresql-16.9-plpython3",
        "pltcl": "/nix/store/203910k6fjk99mj9ysdq58l6m21i5588-postgresql-16.9-pltcl"
      },
      "system": "aarch64-darwin",
      "group": "toplevel",
      "priority": 5
    },
    {
      "attr_path": "postgresql_16",
      "broken": false,
      "derivation": "/nix/store/g2lb2c5xqjy2gc18xmqfbxjw16qahgj7-postgresql-16.9.drv",
      "description": "Powerful, open source object-relational database system",
      "install_id": "postgresql",
      "license": "PostgreSQL",
      "locked_url": "https://github.com/flox/nixpkgs?rev=7fd36ee82c0275fb545775cc5e4d30542899511d",
      "name": "postgresql-16.9",
      "pname": "postgresql_16",
      "rev": "7fd36ee82c0275fb545775cc5e4d30542899511d",
      "rev_count": 834672,
      "rev_date": "2025-07-25T07:48:04Z",
      "scrape_date": "2025-07-27T00:48:31.935925Z",
      "stabilities": [
        "unstable"
      ],
      "unfree": false,
      "version": "16.9",
      "outputs_to_install": [
        "man",
        "out"
      ],
      "outputs": {
        "debug": "/nix/store/h96dfj3j9xqpimvn5v54vx0vmmn0j2gf-postgresql-16.9-debug",
        "dev": "/nix/store/rpcp66gila11fvlnfbdz4fl3m8777nl5-postgresql-16.9-dev",
        "doc": "/nix/store/jg95cxnmkj7ms6bygygz7r194625sccq-postgresql-16.9-doc",
        "jit": "/nix/store/22nynbpqx6lcp4bqgwnpzb1mg0355hb5-postgresql-16.9-jit",
        "lib": "/nix/store/zzx9v8liyw743yvjd5sv4lra3k7yjj7m-postgresql-16.9-lib",
        "man": "/nix/store/c8hamq1dvgnmc19ar4x0gmmg7jajyzkm-postgresql-16.9-man",
        "out": "/nix/store/nddylfjlaa2zvkkh5jz17ik2p8mj53c1-postgresql-16.9",
        "plperl": "/nix/store/5x79i85l8j57qrnpcgygxnwwjw138aks-postgresql-16.9-plperl",
        "plpython3": "/nix/store/l8lgd3cxi6bbv0rywaq6whrb6pfxcqm2-postgresql-16.9-plpython3",
        "pltcl": "/nix/store/dh2xjjxj2p8kzdg2q2p52jcsy95r8kl8-postgresql-16.9-pltcl"
      },
      "system": "aarch64-linux",
      "group": "toplevel",
      "priority": 5
    },
    {
      "attr_path": "postgresql_16",
      "broken": false,
      "derivation": "/nix/store/q624176s81x7xf3irfaxx3677ca5q302-postgresql-16.9.drv",
      "description": "Powerful, open source object-relational database system",
      "install_id": "postgresql",
      "license": "PostgreSQL",
      "locked_url": "https://github.com/flox/nixpkgs?rev=7fd36ee82c0275fb545775cc5e4d30542899511d",
      "name": "postgresql-16.9",
      "pname": "postgresql_16",
      "rev": "7fd36ee82c0275fb545775cc5e4d30542899511d",
      "rev_count": 834672,
      "rev_date": "2025-07-25T07:48:04Z",
      "scrape_date": "2025-07-27T01:07:03.504564Z",
      "stabilities": [
        "unstable"
      ],
      "unfree": false,
      "version": "16.9",
      "outputs_to_install": [
        "man",
        "out"
      ],
      "outputs": {
        "dev": "/nix/store/vcv9m05f45l8lf27zdbvbl8k4pnbqy64-postgresql-16.9-dev",
        "doc": "/nix/store/ca20dffya2ddp03yjs1gv8ly1nwr1wlx-postgresql-16.9-doc",
        "jit": "/nix/store/aamm0g9jj0sy331spmil5yswm5mzkpch-postgresql-16.9-jit",
        "lib": "/nix/store/5ncjvhkk6px0nf2lkllw6bqxan0lnhm2-postgresql-16.9-lib",
        "man": "/nix/store/q791righr0ngrlpwbpw3427hp645invx-postgresql-16.9-man",
        "out": "/nix/store/s5ckcqnivcacrhv4986wsq1s6yd2nd4s-postgresql-16.9",
        "plperl": "/nix/store/szs9ry0py6n2nqhgjchlp62bsdjg52nk-postgresql-16.9-plperl",
        "plpython3": "/nix/store/ikcxj6yprxj3a50invqrkqryjzjg3h68-postgresql-16.9-plpython3",
        "pltcl": "/nix/store/9cppzmcjccigcp43qdbqbgr9ljsdxs0k-postgresql-16.9-pltcl"
      },
      "system": "x86_64-darwin",
      "group": "toplevel",
      "priority": 5
    },
    {
      "attr_path": "postgresql_16",
      "broken": false,
      "derivation": "/nix/store/zcffynkl21pz71vqdxv6cygxlya6bfrx-postgresql-16.9.drv",
      "description": "Powerful, open source object-relational database system",
      "install_id": "postgresql",
      "license": "PostgreSQL",
      "locked_url": "https://github.com/flox/nixpkgs?rev=7fd36ee82c0275fb545775cc5e4d30542899511d",
      "name": "postgresql-16.9",
      "pname": "postgresql_16",
      "rev": "7fd36ee82c0275fb545775cc5e4d30542899511d",
      "rev_count": 834672,
      "rev_date": "2025-07-25T07:48:04Z",
      "scrape_date": "2025-07-27T01:29:17.252542Z",
      "stabilities": [
        "unstable"
      ],
      "unfree": false,
      "version": "16.9",
      "outputs_to_install": [
        "man",
        "out"
      ],
      "outputs": {
        "debug": "/nix/store/09mqnlwxa7fhwq17vg9vc1gg4ij8l6ra-postgresql-16.9-debug",
        "dev": "/nix/store/1z014ixvxsyss7iw07pz78ng4rd0crdb-postgresql-16.9-dev",
        "doc": "/nix/store/8n5h3hppibaav51abbi49wc2rl35ya4y-postgresql-16.9-doc",
        "jit": "/nix/store/czbgjx6j90rnlad16h02lck3r5j447am-postgresql-16.9-jit",
        "lib": "/nix/store/77xx5nkw4sdqp0vxvczyfxz3zn6f6k28-postgresql-16.9-lib",
        "man": "/nix/store/iwhlw4scw0qwn5ckx4lwwmhdkscjb67j-postgresql-16.9-man",
        "out": "/nix/store/w7ldv9b1vc48a235g7ib2kjyqlrzfv0s-postgresql-16.9",
        "plperl": "/nix/store/6yy95k6wxgz1nylc5cnz13c46ip1yn7p-postgresql-16.9-plperl",
        "plpython3": "/nix/store/58kiq19x1gnq60jpapyf8m1zk40xrldw-postgresql-16.9-plpython3",
        "pltcl": "/nix/store/cfk2af6qvhg5ry2jcih8k2a0cig8m1xm-postgresql-16.9-pltcl"
      },
      "system": "x86_64-linux",
      "group": "toplevel",
      "priority": 5
    }
  ]
}